<html>
<head>
	<title>Simple Project Tracker</title>
	<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.3.0/pure-min.css">
	<link rel="stylesheet" href="css/style.css">
</head>
<body>
	<div class="pure-g-r page-wrapper">
		<header class="pure-u-1 page-header">
			<div class="pure-menu pure-menu-open pure-menu-horizontal top-nav">
				<a href="#" class="pure-menu-heading">MC Goals</a>
			    <ul>
			        <li class="pure-menu-selected"><a href="#">Coding</a></li>
			        <li><a href="#">Health</a></li>
			        <li><a href="#">Finance</a></li>
			    </ul>
			</div>
		</header>
		<section class="pure-u-1 content 1-box">
			<div class="spacer">
				<h2 class="page-title">100 Days of Front End Code</h2>
				<a id="new-project-button" class="pure-button" href="#">Add a Project</a>
				<ul id="results" class="calendar-grid">
					<li>M</li>
					<li>T</li>
					<li>W</li>
					<li>Th</li>
					<li>F</li>
					<li>S</li>
					<li>Su</li>
				</ul>
		</div><!--end spacer-->
		</section><!--end content-->
		<footer></footer>
		
	</div><!--end page-wrapper-->
	<div id="new-project-modal" class="modal hide">
		<div class="modal-header">
			<h3>Add a Project</h3>
		</div>
		<div class="modal-body">
			<form class="pure-form pure-form-stacked" id="new_project_form" method="post">
				<input type="text" id="title" placeholder="Title">
				<input type="text" id="github_url" placeholder="Github URL">
				<input type="text" id="live_url" placeholder="Live URL">
				<input type="text" id="image_url" placeholder="Image URL">
				<textarea id="desc" placeholder="Description"></textarea>
				
				<label for="complete">
					<input type="checkbox" id="complete" name="complete" value="complete">
					Is complete?
				</label>

				<input class="pure-button pure-button-primary" type="submit" id="submit_project" value="Add Project">
			</form>
		</div>
		<div class="modal-footer">
			<a id="new-project-modal-close" class="modal-close" href="#">cancel</a>
		</div>
	</div><!--end modal-->
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.2.1/handlebars.min.js"></script>
	<script type="text/javascript">

		var url = 'data/project-data.json';
		var results;

		$.ajax({
			type: 'get',
			url: url,
			dataType: 'json',
			success: displayProjectCalendar
		});

		function displayProjectCalendar(data) {
			console.log(data);
			var source = $('#projects-results-tpl').html();
			var template = Handlebars.compile(source);
			var context = data;
			var html = template(context);
			$('#results').append(html);

			writeEmptyItems(data);
		}

		function writeEmptyItems(obj) {
			//var temp = JSON.parse(obj);
			console.log(obj.projects.length);
			var itemsToWrite = 100 - obj.projects.length;
			var li = '<li><a href="#"></a></li>';
			var i;
			var output = li;

			for(i=0;i<itemsToWrite;i++) {
				output += li;
			}

			$('#results').append(output);
			insertDivider();
		}

		function insertDivider() {
			$('#results li').each(function(i) {
				if((i-6)%28 === 0 && i != 6) {
					$(this).after('<li class="divider"></li>');
				}
			});
		}
		$(document).ready(function() {
			//open modal
			$('#new-project-button').click(function(e) {
				e.preventDefault();
				$('#new-project-modal').removeClass('hide');
				$('.page-wrapper').css('opacity', 0.5);
			});
			//close modal
			$('.modal').find('.modal-close').click(function(e) {
				e.preventDefault();
				$('#new-project-modal').addClass('hide');
				$('.page-wrapper').css('opacity', 1);
			});

		});

	</script>
	<script type="x-handlebars-template" id="projects-results-tpl">
		{{#each projects}}
		<li>
			<a class="{{complete}}" href="#"></a>
		</li>
		{{/each}}
	</script>
</body>
</html>